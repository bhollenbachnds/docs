---
- title: Microsoft Entra ID
---

L'approvisionnement des utilisateurs est le processus de création, de mise à jour et de suppression automatique des comptes utilisateurs. Il garantit que les utilisateurs obtiennent les accès appropriés lorsqu'ils rejoignent l'organisation, changent de rôle ou la quittent.

Pour permettre l'approvisionnement des utilisateurs, notre système utilise la norme SCIM qui fournit une méthode cohérente et automatisée pour créer, mettre à jour et désactiver les utilisateurs.

Pour configurer l'approvisionnement des utilisateurs, vous devrez créer un fournisseur d'identité en suivant les instructions de configuration SSO dans ce document, activer l'option SCIM sur celui-ci, puis configurer la configuration SCIM sur le fournisseur d'identité externe.

## 1. Activer SCIM sur le fournisseur d'identité PADS4

Lors de la configuration de votre fournisseur d'identité PADS4, vous avez la possibilité d'activer une option de Provisionnement SCIM.

Pour l'activer, lors de la création du fournisseur d'identité :

* Cliquez sur l'étape "SCIM Provisioning"
* Cliquez sur "Enable SCIM Provisioning"

![Scim Ms1](/images/ctrl-centre/administration/credentials/SCIM/scim-ms1.png)

Une fois que vous l'avez activé, veuillez conserver les données suivantes :

* SCIM URL
* SCIM Access Token

Ces valeurs seront réutilisées ultérieurement lors de la configuration du Provisionnement SCIM du côté du fournisseur d'identité externe.

## 2. Configurer SCIM sur le fournisseur d'identité externe

Maintenant que le Provisionnement SCIM est activé sur PADS4, vous devrez configurer la configuration SCIM d'approvisionnement des utilisateurs sur le fournisseur d'identité externe

### Fournisseur d'identité Microsoft Entra

Sur Microsoft Entra, la fonctionnalité d'approvisionnement des utilisateurs peut être activée sur la même application que vous avez précédemment créée pour le SSO.

* Ouvrez l'application d'entreprise que vous avez précédemment créée
* Dans le menu de gauche, cliquez sur "Provisioning"

![Scim Ms2](/images/ctrl-centre/administration/credentials/SCIM/scim-ms2.png)

* Sur la page d'aperçu qui vient de s'ouvrir, cliquez sur "New Configuration"

![Scim Ms3](/images/ctrl-centre/administration/credentials/SCIM/scim-ms3.png)

#### Créer la configuration de provisionnement

* Sur cette nouvelle page de configuration, vous devrez remplir certaines informations :
  * **Authentication method** – PADS4 utilise l'authentification Bearer pour SCIM, donc sélectionnez "Bearer authentication"
  * **Tenant URL** – Ici, vous devrez remplir l'URL qui a été donnée sur le fournisseur d'identité PADS4 comme "SCIM URL" (par exemple [https://pads4.mycompany.com](https://pads4.mycompany.com) /rdx/[nds.services](http://nds.services).user.scim/api/v1/scim)
  * **Secret Token** – Ici, vous devrez remplir le jeton qui a été donné sur le fournisseur d'identité PADS4 comme "SCIM Access token"

<Warning>
  Attention: This Tenant URL must be publicly accessible because Azure uses it as a callback for user provisioning.
</Warning>

* Cliquez sur "Test connection" pour vous assurer que la connexion est OK
* Ensuite, si la connexion est correcte, vous pouvez cliquer sur le bouton "Create"

![Scim Ms4](/images/ctrl-centre/administration/credentials/SCIM/scim-ms4.png)

#### Configurer le mappage des utilisateurs et des groupes

Maintenant que la configuration du provisionnement des utilisateurs est terminée, le mappage des utilisateurs et des groupes doit être configuré.

* Dans le menu de la page Provisioning, cliquez sur "**Attribute mapping**"

![Scim Ms5](/images/ctrl-centre/administration/credentials/SCIM/scim-ms5.png)

* Configurer le mappage des groupes

<Note>
  Le mappage des groupes est configuré par défaut comme prévu, vous pouvez simplement vous assurer que les paramètres suivants sont appliqués.
</Note>

![Scim Ms6](/images/ctrl-centre/administration/credentials/SCIM/scim-ms6.png)

* Configurer le mappage des utilisateurs
  * Le mappage des utilisateurs devrait être configuré comme ci-dessous par défaut.

![Scim Ms7](/images/ctrl-centre/administration/credentials/SCIM/scim-ms7.png)

* De la configuration initiale, les attributs qui peuvent être conservés sont les suivants
  * Tous les attributs mappés non existants peuvent être supprimés.

![Scim Ms8](/images/ctrl-centre/administration/credentials/SCIM/scim-ms8.png)

* Ajouter le nouvel attribut personnalisé **externalId**
  * Lorsque tous les attributs non existants sont supprimés, cliquez sur le bouton "Add New Mapping" et remplissez les informations suivantes pour créer l'attribut **externalId**

![Scim Ms9](/images/ctrl-centre/administration/credentials/SCIM/scim-ms9.png)

* **(Optionnel)** Ajouter des attributs optionnels

Vous pouvez également ajouter des attributs optionnels qui sont définis par PADS4

Pour les utiliser, vous devrez cliquer à nouveau sur "Add New Mapping" pour chacun de ces attributs et les configurer.

Actuellement, les attributs optionnels disponibles sont :

| Target attribute | Comment                                                                                                           |
| ---------------- | ----------------------------------------------------------------------------------------------------------------- |
| NFC              | Cette propriété sera utilisée pour synchroniser toute valeur remplie dans la propriété NFC de l'utilisateur PADS4 |

* Cliquez sur save pour enregistrer la configuration de mappage des utilisateurs

#### Attribuer un groupe autorisé pour accéder à l'application

Sur Microsoft Entra, vous devrez définir quels membres du groupe seront synchronisés avec l'application.

Ceci est configuré de la même manière que la configuration Single Sign-on et les groupes d'utilisateurs déjà définis pour le SSO seront déjà appliqués à cette configuration.

Si vous avez besoin d'étendre cette liste de groupes d'utilisateurs, veuillez suivre ces instructions dans l'article SSO respectif à la partie : **Assign user groups to the application**

#### Démarrer le service de provisionnement

Maintenant que la configuration du provisionnement est terminée à la fois sur **Microsoft Entra (Azure)** et **PADS4**, et que les groupes ont été assignés à l'application, le **provisioning service** peut être démarré.

Pour le démarrer, allez dans l'onglet provisioning dans le menu de gauche et cliquez sur le bouton "**Start provisioning**".

![Scim Ms10](/images/ctrl-centre/administration/credentials/SCIM/scim-ms10.png)
